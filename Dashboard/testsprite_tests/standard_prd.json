{
  "meta": {
    "project": "Smart Home IoT Dashboard",
    "date": "2025-12-10",
    "prepared_by": "Antigravity AI Assistant"
  },
  "product_overview": "Smart Home IoT Dashboard is a React-based web application providing a centralized interface for real-time monitoring and control of smart home IoT devices. It integrates multiple sensors measuring environment parameters like temperature, humidity, air quality, power consumption, and light intensity, along with relay controls for home automation. The system supports historical data analysis, threshold-based alerts, comprehensive user and role management, and configuration settings to customize the smart home experience.",
  "core_goals": [
    "Provide real-time monitoring of multiple environment sensors with visualizations and alerts.",
    "Enable remote control of relay actuators to automate home devices.",
    "Support historical data with exports and analytics for informed decision-making.",
    "Ensure secure authentication, authorization, and user management with role-based access.",
    "Allow configuration of system parameters including MQTT broker, update intervals, and alert thresholds.",
    "Improve system reliability through robust backend integration and MQTT communication handling."
  ],
  "key_features": [
    "Dashboard with real-time sensor status, server time, and environmental statistics with charts.",
    "Individual sensor pages for DHT22, MQ2, PZEM-004T, BH1750 with real-time readings, history views, and export options.",
    "Relay control interface to toggle and rename 4-channel relays with status synchronization via MQTT.",
    "User authentication including login, password management, admin bootstrap, and forced password changes.",
    "Role-based user management with admin control over users' creation, deletion and password resets.",
    "System settings for MQTT broker configuration, update intervals, and sensor threshold alerts.",
    "Historical data views with multiple time ranges, data aggregation, and export to Excel format.",
    "Notification system for alerts and system feedback via toast messages.",
    "Responsive, Indonesian-localized UI built with React, TailwindCSS, and Chart.js."
  ],
  "user_flow_summary": [
    "User accesses the login page and authenticates with username and password; first user is automatically assigned admin role.",
    "Admin can manage users via the user management page, creating, deleting, or resetting passwords as needed.",
    "Upon login, user lands on the dashboard showing real-time sensor data and system status.",
    "User navigates to individual sensor pages to view detailed real-time graphs, history, and exports.",
    "Admin accesses relay control page to toggle relay statuses, rename relays, and monitor their states synced through MQTT.",
    "Admins configure system parameters including MQTT broker settings and sensor alert thresholds in the settings page.",
    "Users receive real-time notifications on threshold breaches or system updates as toast messages.",
    "All users can update their profiles, change passwords, and retrieve historical sensor data with export options."
  ],
  "validation_criteria": [
    "Real-time data updates for sensors refresh at a minimum interval of 5 seconds.",
    "All API endpoints respond within 500ms under normal load conditions.",
    "User authentication handles secure password hashing and enforces forced password changes after resets.",
    "Role-based access control is validated: Admins have full access while regular users have limited permissions.",
    "Relay controls synchronize MQTT commands and database persistently with accurate status reflected in UI.",
    "Threshold alerts trigger notifications correctly based on sensor data crossing warning or danger levels.",
    "Historical data exports to Excel produce correctly formatted files with requested time ranges.",
    "MQTT connection includes automatic reconnection with exponential backoff strategy and maximum retry limits.",
    "UI responsiveness and localization verified on desktop and mobile devices with Indonesian language support."
  ],
  "code_summary": {
    "tech_stack": [
      "Javascript",
      "React",
      "Vite",
      "TailwindCSS",
      "Chart.js",
      "MQTT"
    ],
    "features": [
      {
        "name": "Authentication",
        "description": "User login, password management, and admin setup.",
        "files": [
          "src/pages/Login.jsx",
          "src/pages/SetupAdmin.jsx",
          "src/pages/ForgotPassword.jsx",
          "src/components/ForceChangePassword.jsx",
          "src/components/ProtectedRoute.jsx"
        ]
      },
      {
        "name": "User Management",
        "description": "Admin interface to manage users.",
        "files": [
          "src/pages/UserManagement.jsx"
        ]
      },
      {
        "name": "Dashboard Layout",
        "description": "Main dashboard layout with sidebar and notifications.",
        "files": [
          "src/pages/Dashboard.jsx",
          "src/components/Layout.jsx",
          "src/components/Sidebar.jsx",
          "src/components/NotificationToast.jsx"
        ]
      },
      {
        "name": "Sensor Monitoring",
        "description": "Real-time monitoring and history for various sensors (BH1750, DHT22, MQ2, PZEM).",
        "files": [
          "src/pages/SensorBH1750.jsx",
          "src/pages/SensorDHT22.jsx",
          "src/pages/SensorMQ2.jsx",
          "src/pages/SensorPZEM.jsx",
          "src/pages/History.jsx",
          "src/components/SensorHistory.jsx",
          "src/components/HistoryStats.jsx"
        ]
      },
      {
        "name": "Device Control",
        "description": "Control relays and system settings.",
        "files": [
          "src/pages/Relay.jsx",
          "src/pages/Settings.jsx"
        ]
      }
    ]
  }
}
